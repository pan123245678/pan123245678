在Linux内核中，可以通过以下方式设置printk的信息输出级别：

## 1. **printk级别定义**

```c
#define KERN_EMERG   "<0>"  /* 紧急/致命错误 */
#define KERN_ALERT   "<1>"  /* 需要立即关注 */
#define KERN_CRIT    "<2>"  /* 严重状态 */
#define KERN_ERR     "<3>"  /* 错误状态 */
#define KERN_WARNING "<4>"  /* 警告状态 */
#define KERN_NOTICE  "<5>"  /* 正常但重要 */
#define KERN_INFO    "<6>"  /* 信息性消息 */
#define KERN_DEBUG   "<7>"  /* 调试级消息 */
```

## 2. **设置info级别输出**

### **方法一：在printk中使用KERN_INFO宏**
```c
printk(KERN_INFO "This is an info message\n");
// 或者使用简写
pr_info("This is an info message\n");  // 需要包含 <linux/printk.h>
```

### **方法二：动态设置控制台日志级别**
```c
// 查看当前控制台日志级别
cat /proc/sys/kernel/printk
// 输出格式：当前 默认 最小 启动时默认
// 例如：7 4 1 7

// 设置控制台日志级别为7（显示所有消息）
echo 7 > /proc/sys/kernel/printk

// 临时设置（重启失效）
sysctl -w kernel.printk="7 4 1 7"
```

### **方法三：内核启动参数**
在grub配置中添加：
```bash
# 显示所有级别的消息
loglevel=7
# 或
ignore_loglevel
```

## 3. **常用函数宏**
```c
pr_emerg(fmt, ...)    // KERN_EMERG
pr_alert(fmt, ...)    // KERN_ALERT  
pr_crit(fmt, ...)     // KERN_CRIT
pr_err(fmt, ...)      // KERN_ERR
pr_warning(fmt, ...)  // KERN_WARNING
pr_notice(fmt, ...)   // KERN_NOTICE
pr_info(fmt, ...)     // KERN_INFO
pr_debug(fmt, ...)    // KERN_DEBUG（需要定义DEBUG宏）
```

## 4. **配置文件永久设置**
在`/etc/sysctl.conf`中添加：
```bash
kernel.printk = 7 4 1 7
```
然后执行：
```bash
sysctl -p
```

## 5. **检查消息是否显示**
```bash
# 查看内核环形缓冲区
dmesg
# 或
cat /proc/kmsg

# 只显示info及以上级别的消息
dmesg -l info
```

**注意**：
- 默认的控制台日志级别通常是4，这意味着只有KERN_WARNING及以上级别的消息会显示在控制台
- 所有printk消息都会进入内核环形缓冲区，可以通过dmesg查看
- 使用pr_debug需要在内核配置中启用CONFIG_DYNAMIC_DEBUG或定义DEBUG宏